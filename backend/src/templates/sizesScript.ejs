<script>
    function initContainer(img) {
        const container = img.parentElement;
        const imgWidth = img.naturalWidth;
        const imgHeight = img.naturalHeight;

        let finalWidth = imgWidth;
        let finalHeight = imgHeight;

        const maxWidth = window.innerWidth * 0.8;
        const maxHeight = window.innerHeight * 0.7;
        if (imgWidth > maxWidth || imgHeight > maxHeight) {
            const ratio = Math.min(maxWidth / imgWidth, maxHeight / imgHeight);
            finalWidth = imgWidth * ratio;
            finalHeight = imgHeight * ratio;
        }

        const minWidth = window.innerWidth * 0.8;
        const minHeight = window.innerHeight * 0.7;
        if (finalWidth < minWidth || finalHeight < minHeight) {
            const ratio = Math.min(
                minWidth / finalWidth,
                minHeight / finalHeight
            );
            finalWidth *= ratio;
            finalHeight *= ratio;
        }

        container.style.width = finalWidth + "px";
        container.style.height = finalHeight + "px";
        container.style.aspectRatio = `${imgWidth}/${imgHeight}`;

        console.log(
            `Original: ${imgWidth}x${imgHeight}, Final: ${finalWidth}x${finalHeight}`
        );
    }

    document.addEventListener("DOMContentLoaded", () => {
        const images = document.querySelectorAll(".img");
        images.forEach((img) => {
            img.addEventListener("load", () => initContainer(img));
            setTimeout(() => initContainer(img), 2000);
        });
    });
</script>
